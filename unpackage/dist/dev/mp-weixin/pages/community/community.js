(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/community/community"],{71:
/*!********************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/main.js?{"page":"pages%2Fcommunity%2Fcommunity"} ***!
  \********************************************************************************************/
/*! no static exports found */function(t,n,i){"use strict";(function(t){i(/*! uni-pages */4),i(/*! @dcloudio/uni-stat */5);n(i(/*! vue */2));function n(t){return t&&t.__esModule?t:{default:t}}t(n(i(/*! ./pages/community/community.vue */72)).default)}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},72:
/*!*************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue ***!
  \*************************************************************************/
/*! no static exports found */function(t,n,i){"use strict";i.r(n);var e=i(/*! ./community.vue?vue&type=template&id=341ceeb5&scoped=true& */73),o=i(/*! ./community.vue?vue&type=script&lang=js& */75);for(var s in o)"default"!==s&&function(t){i.d(n,t,function(){return o[t]})}(s);i(/*! ./community.vue?vue&type=style&index=0&id=341ceeb5&scoped=true&lang=less& */79);var c=i(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */14),u=Object(c.default)(o.default,e.render,e.staticRenderFns,!1,null,"341ceeb5",null,!1,e.components,void 0);u.options.__file="C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue",n.default=u.exports},73:
/*!********************************************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue?vue&type=template&id=341ceeb5&scoped=true& ***!
  \********************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,n,i){"use strict";i.r(n);var e=i(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=template&id=341ceeb5&scoped=true& */74);i.d(n,"render",function(){return e.render}),i.d(n,"staticRenderFns",function(){return e.staticRenderFns}),i.d(n,"recyclableRender",function(){return e.recyclableRender}),i.d(n,"components",function(){return e.components})},74:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue?vue&type=template&id=341ceeb5&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,n,i){"use strict";i.r(n),i.d(n,"render",function(){return e}),i.d(n,"staticRenderFns",function(){return s}),i.d(n,"recyclableRender",function(){return o}),i.d(n,"components",function(){});var e=function(){var t=this.$createElement;this._self._c},o=!1,s=[];e._withStripped=!0},75:
/*!**************************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************/
/*! no static exports found */function(t,n,i){"use strict";i.r(n);var e=i(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=script&lang=js& */76),o=i.n(e);for(var s in e)"default"!==s&&function(t){i.d(n,t,function(){return e[t]})}(s);n.default=o.a},76:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e;(e=i(/*! @/public/js/index.post.data.js */77))&&e.__esModule,i(/*! @/public/js/formatTime.js */78);var o={components:{chatInput:function(){return i.e(/*! import() | components/im-chat/chatinput */"components/im-chat/chatinput").then(i.bind(null,/*! ../../components/im-chat/chatinput.vue */139))}},data:function(){return{post:[],user_id:4,username:"Liuxy",index:"",comment_index:"",input_placeholder:"评论",focus:!1,is_reply:!1,showInput:!1,screenHeight:"",platform:"",windowHeight:"",loadMoreText:"加载中...",showLoadMore:!1,hide:!0,info:"",api:this.$API,list:[],size:10}},onLoad:function(){var n=this;t.getSystemInfo({success:function(t){n.screenHeight=t.screenHeight,n.platform=t.platform}}),t.startPullDownRefresh(),this.getUserInfo(),this.getList()},onShow:function(){var n=this;t.onWindowResize(function(t){"ios"===n.platform?(n.windowHeight=t.size.windowHeight,n.adjust()):n.screenHeight-t.size.windowHeight>60&&n.windowHeight<=t.size.windowHeight&&(n.windowHeight=t.size.windowHeight,n.adjust())}),this.getList(),this.getUserInfo()},onPageScroll:function(t){t.scrollTop>=144?this.hide=!1:this.hide=!0},onHide:function(){t.offWindowResize()},onUnload:function(){this.max=0,this.data=[],this.loadMoreText="加载更多",this.showLoadMore=!1},onReachBottom:function(){},onPullDownRefresh:function(){console.log("onPullDownRefresh"),setTimeout(function(){t.stopPullDownRefresh()},1e3)},onNavigationBarButtonTap:function(t){0==t.index&&this.navigateTo("../publish/publish")},computed:{},methods:{getList:function(){var n=this,i=t.getStorageSync("account");this.$http.get("/Community/dynamic",{index:this.index,size:this.size}).then(function(t){n.post=t.data.list;for(var e=0;e<n.post.length;e++)for(var o=0;o<n.post[e].likeList.length;o++)n.post[e].likeList[o].uid==i&&(n.post[e].islike=1);console.log(n.post)}).catch(function(n){t.showToast({icon:"none",title:"系统错误，请稍后再试"})})},getUserInfo:function(){var n=this;this.$http.get("/User/userInfo").then(function(t){n.info=t.data}).catch(function(n){t.showToast({icon:"none",title:"请重新登录"})})},changeBgImage:function(){var n=this,i=this;t.chooseImage({count:1,success:function(e){n.$http.uploadFile(e.tempFilePaths[0]).then(function(e){n.$http.put("/User/changeBgImage",e.data).then(function(n){1===n.code&&t.showToast({icon:"success",title:"修改成功!",success:function(t){i.getList()}})}).catch(function(n){t.showToast({icon:"none",title:"系统错误，请稍后再试!"})})}).catch(function(n){t.showToast({icon:"none",title:"系统错误，请稍后再试!"})})}})},test:function(){this.navigateTo("../test/test")},navigateTo:function(n){t.navigateTo({url:n})},like:function(n){var i=t.getStorageSync("account");if(0==this.post[n].islike)this.post[n].islike=1,this.post[n].likeList.push({uid:i,name:this.info.name,avatar:this.info.avatar}),this.$http.post("/Community/like",{post_id:this.post[n].post_id,likeList:JSON.stringify(this.post[n].likeList)});else{this.post[n].islike=0;for(var e=0;e<this.post[n].likeList.length;e++)this.post[n].likeList[e].uid==i&&this.post[n].likeList.splice(e,1);this.$http.post("/Community/like",{post_id:this.post[n].post_id,likeList:JSON.stringify(this.post[n].likeList)}).then(function(t){}).catch(function(n){t.showToast({icon:"none",title:"系统错误，请稍后再试!"})})}},comment:function(t){this.showInput=!0,this.focus=!0,this.index=t},adjust:function(){},reply:function(t,n){this.is_reply=!0,this.showInput=!0;var i=this.post[t].comments.content[n].name;this.input_placeholder="回复"+i,this.index=t,this.comment_index=n,this.focus=!0},blur:function(){this.init_input()},send_comment:function(n){var i=t.getStorageSync("account"),e=this,o=n.content;this.post[this.index].comments.content.push({uid:i,name:this.info.name,avatar:this.info.avatar,content:o,to_uid:this.post[this.index].comments.content[this.comment_index]?this.post[this.index].comments.content[this.comment_index].uid:"",to_name:this.post[this.index].comments.content[this.comment_index]?this.post[this.index].comments.content[this.comment_index].name:"",to_avatar:this.post[this.index].comments.content[this.comment_index]?this.post[this.index].comments.content[this.comment_index].avatar:""}),this.$http.post("/Community/comments",{post_id:this.post[this.index].post_id,comments:JSON.stringify(this.post[this.index].comments)}).then(function(t){e.getList()}).catch(function(n){t.showToast({icon:"none",title:"系统错误，请稍后再试!"})}),this.init_input()},init_input:function(){this.showInput=!1,this.focus=!1,this.input_placeholder="评论",this.is_reply=!1},previewImage:function(n,i){for(var e=0;e<n.length;e++)n[e]=this.api+n[e];console.log(n);var o=n[i];t.previewImage({current:o,urls:n})},goPublish:function(){t.navigateTo({url:"publish?avatar="+this.info.avatar+"&name="+this.info.name,success:function(t){},fail:function(){},complete:function(){}})},goPublish_video:function(){t.navigateTo({url:"publish_video?avatar="+this.info.avatar+"&name="+this.info.name,success:function(t){},fail:function(){},complete:function(){}})}}};n.default=o}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},79:
/*!***********************************************************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue?vue&type=style&index=0&id=341ceeb5&scoped=true&lang=less& ***!
  \***********************************************************************************************************************************/
/*! no static exports found */function(t,n,i){"use strict";i.r(n);var e=i(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-1!./node_modules/css-loader??ref--10-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=style&index=0&id=341ceeb5&scoped=true&lang=less& */80),o=i.n(e);for(var s in e)"default"!==s&&function(t){i.d(n,t,function(){return e[t]})}(s);n.default=o.a},80:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-1!./node_modules/css-loader??ref--10-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Thinkpad/Desktop/PetSocial/pages/community/community.vue?vue&type=style&index=0&id=341ceeb5&scoped=true&lang=less& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,n,i){}},[[71,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/community/community.js.map