(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/community/publish"],{81:
/*!******************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/main.js?{"page":"pages%2Fcommunity%2Fpublish"} ***!
  \******************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4),n(/*! @dcloudio/uni-stat */5);e(n(/*! vue */2));function e(t){return t&&t.__esModule?t:{default:t}}t(e(n(/*! ./pages/community/publish.vue */82)).default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},82:
/*!***********************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue ***!
  \***********************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! ./publish.vue?vue&type=template&id=2478144a&scoped=true& */83),s=n(/*! ./publish.vue?vue&type=script&lang=js& */85);for(var o in s)"default"!==o&&function(t){n.d(e,t,function(){return s[t]})}(o);n(/*! ./publish.vue?vue&type=style&index=0&id=2478144a&scoped=true&lang=css& */90);var a=n(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */14),c=Object(a.default)(s.default,i.render,i.staticRenderFns,!1,null,"2478144a",null,!1,i.components,void 0);c.options.__file="C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue",e.default=c.exports},83:
/*!******************************************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue?vue&type=template&id=2478144a&scoped=true& ***!
  \******************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=template&id=2478144a&scoped=true& */84);n.d(e,"render",function(){return i.render}),n.d(e,"staticRenderFns",function(){return i.staticRenderFns}),n.d(e,"recyclableRender",function(){return i.recyclableRender}),n.d(e,"components",function(){return i.components})},84:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue?vue&type=template&id=2478144a&scoped=true& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e),n.d(e,"render",function(){return i}),n.d(e,"staticRenderFns",function(){return o}),n.d(e,"recyclableRender",function(){return s}),n.d(e,"components",function(){});var i=function(){var t=this.$createElement;this._self._c},s=!1,o=[];i._withStripped=!0},85:
/*!************************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=script&lang=js& */86),s=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e.default=s.a},86:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,s=(i=n(/*! ./node_modules/@babel/runtime/regenerator */87))&&i.__esModule?i:{default:i};function o(t,e,n,i,s,o,a){try{var c=t[o](a),r=c.value}catch(t){return void n(t)}c.done?e(r):Promise.resolve(r).then(i,s)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var a=t.apply(e,n);function c(t){o(a,i,s,c,r,"next",t)}function r(t){o(a,i,s,c,r,"throw",t)}c(void 0)})}}var c=[["camera"],["album"],["camera","album"]],r=[["compressed"],["original"],["compressed","original"]],u={data:function(){return{input_content:"",imageList:[],api:this.$API,sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],startX:0,movedX:0,endX:0,postImageList:[],avatar:"",name:""}},onUnload:function(){this.imageList=[],this.sourceTypeIndex=2,this.sourceType=["拍照","相册","拍照或相册"],this.sizeTypeIndex=2,this.sizeType=["压缩","原图","压缩或原图"],this.countIndex=8},onLoad:function(t){this.avatar=t.avatar,this.name=t.name},methods:{publish:function(){var e=a(s.default.mark(function e(){var n,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.showLoading({title:"发布中"}),n=new Date,i=JSON.stringify({text:this.input_content,images:this.postImageList}),this.$http.post("/Community/postDynamic",{avatar:this.avatar,name:this.name,content:i,timestamp:n.getTime()}).then(function(e){1===e.code&&t.showToast({icon:"success",title:"发布成功!",success:function(e){setTimeout(function(){t.navigateBack({delta:1})},1e3)}})}).catch(function(e){t.showToast({icon:"none",title:"系统错误，请稍后再试!"})});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getLocation:function(){return new Promise(function(e,n){t.getLocation({type:"wgs84",success:function(t){e(t)},fail:function(t){n(t)}})})},close:function(t){this.imageList.splice(t,1)},chooseImage:function(){var e=a(s.default.mark(function e(){var n,i=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(9!==this.imageList.length){e.next=7;break}return e.next=3,this.isFullImg();case 3:if(n=e.sent,console.log("是否继续?",n),n){e.next=7;break}return e.abrupt("return");case 7:t.chooseImage({sourceType:c[this.sourceTypeIndex],sizeType:r[this.sizeTypeIndex],count:this.imageList.length+this.count[this.countIndex]>9?9-this.imageList.length:this.count[this.countIndex],success:function(e){i.imageList=i.imageList.concat(e.tempFilePaths);for(var n=0;n<i.imageList.length;n++)i.$http.uploadFile(i.imageList[n]).then(function(t){i.postImageList.push(t.data.path)}).catch(function(e){t.showToast({icon:"none",title:"系统错误，请稍后再试!"})})}});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),isFullImg:function(){var e=this;return new Promise(function(n){t.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(t){t.confirm?(e.imageList=[],n(!0)):n(!1)},fail:function(){n(!1)}})})},previewImage:function(e){var n=e.target.dataset.src;t.previewImage({current:n,urls:this.imageList})},touchStart:function(t){this.startX=t.mp.changedTouches[0].pageX},touchEnd:function(e){this.endX=e.mp.changedTouches[0].pageX,this.endX-this.startX>200&&t.navigateBack()}}};e.default=u}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},90:
/*!********************************************************************************************************************************!*\
  !*** C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue?vue&type=style&index=0&id=2478144a&scoped=true&lang=css& ***!
  \********************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=style&index=0&id=2478144a&scoped=true&lang=css& */91),s=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e.default=s.a},91:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Thinkpad/Desktop/PetSocial/pages/community/publish.vue?vue&type=style&index=0&id=2478144a&scoped=true&lang=css& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[81,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/community/publish.js.map